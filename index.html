<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MaxFilms - Clone Netflix</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #070707;
    }
    /* Scrollbar estilizado */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #070707;
    }
    ::-webkit-scrollbar-thumb {
      background-color: #5F81F0;
      border-radius: 10px;
    }
  </style>
</head>
<body class="text-white font-sans">

  <!-- Header -->
  <header class="flex items-center justify-between p-4 border-b border-gray-800 sticky top-0 bg-[#070707] z-50">
    <h1 class="text-3xl font-bold text-[#5F81F0] cursor-pointer select-none">MaxFilms</h1>
    <nav>
      <ul class="flex space-x-6 text-lg">
        <li><button class="hover:text-[#5F81F0] transition">Início</button></li>
        <li><button class="hover:text-[#5F81F0] transition">Séries</button></li>
        <li><button class="hover:text-[#5F81F0] transition">Filmes</button></li>
        <li><button class="hover:text-[#5F81F0] transition">Minha Lista</button></li>
      </ul>
    </nav>
    <div>
      <input id="searchInput" type="text" placeholder="Buscar filmes..." 
        class="rounded px-3 py-1 text-black focus:outline-none" />
      <button id="searchBtn" class="bg-[#5F81F0] px-3 py-1 rounded ml-2 hover:bg-blue-700 transition">Buscar</button>
    </div>
  </header>

  <!-- Destaque -->
  <section id="featured" class="relative h-[60vh] flex items-end p-8 bg-gradient-to-t from-[#070707] to-transparent">
    <div class="max-w-4xl">
      <h2 id="featuredTitle" class="text-4xl font-extrabold mb-4"></h2>
      <p id="featuredOverview" class="text-lg max-w-2xl mb-6"></p>
      <button id="watchBtn" class="bg-[#5F81F0] px-6 py-3 rounded font-semibold hover:bg-blue-700 transition">Assistir</button>
    </div>
    <div id="featuredBackdrop" class="absolute top-0 left-0 w-full h-full bg-cover bg-center -z-10 opacity-40 rounded-lg"></div>
  </section>

  <!-- Lista de filmes -->
  <main class="p-8 max-w-7xl mx-auto">
    <h3 class="text-2xl font-bold mb-6">Filmes Populares</h3>
    <div id="moviesGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4"></div>
  </main>

  <script>
    const API_KEY = '3768af77daf09e55427b9e33fd7bc822'; // Substitua aqui
    const BASE_URL = 'https://api.themoviedb.org/3';
    const IMG_URL = 'https://image.tmdb.org/t/p/w500';

    const featuredTitle = document.getElementById('featuredTitle');
    const featuredOverview = document.getElementById('featuredOverview');
    const featuredBackdrop = document.getElementById('featuredBackdrop');
    const moviesGrid = document.getElementById('moviesGrid');
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const watchBtn = document.getElementById('watchBtn');

    // Função para buscar filmes populares
    async function fetchPopularMovies() {
      const res = await fetch(`${BASE_URL}/movie/popular?api_key=${API_KEY}&language=pt-BR&page=1`);
      const data = await res.json();
      return data.results;
    }

    // Função para buscar filme por busca
    async function searchMovies(query) {
      const res = await fetch(`${BASE_URL}/search/movie?api_key=${API_KEY}&language=pt-BR&query=${encodeURIComponent(query)}&page=1&include_adult=false`);
      const data = await res.json();
      return data.results;
    }

    // Exibir filmes na grid
    function displayMovies(movies) {
      moviesGrid.innerHTML = '';
      movies.forEach(movie => {
        const movieEl = document.createElement('div');
        movieEl.classList.add('cursor-pointer', 'transform', 'hover:scale-105', 'transition', 'duration-300', 'rounded', 'overflow-hidden', 'shadow-lg', 'bg-gray-900');
        movieEl.innerHTML = `
          <img src="${movie.poster_path ? IMG_URL + movie.poster_path : 'https://via.placeholder.com/500x750?text=Sem+Imagem'}" alt="${movie.title}" class="w-full h-auto" />
          <div class="p-2">
            <h4 class="text-sm font-semibold truncate">${movie.title}</h4>
            <p class="text-xs text-gray-400">${movie.release_date ? movie.release_date.substring(0,4) : ''}</p>
          </div>
        `;
        movieEl.addEventListener('click', () => setFeaturedMovie(movie));
        moviesGrid.appendChild(movieEl);
      });
    }

    // Definir filme em destaque
    function setFeaturedMovie(movie) {
      featuredTitle.textContent = movie.title;
      featuredOverview.textContent = movie.overview || 'Sem descrição disponível.';
      featuredBackdrop.style.backgroundImage = movie.backdrop_path ? `url(${IMG_URL + movie.backdrop_path})` : 'none';
      watchBtn.onclick = () => {
        alert(`Assistindo: ${movie.title}`);
      };
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Inicialização
    async function init() {
      const popularMovies = await fetchPopularMovies();
      displayMovies(popularMovies);
      if (popularMovies.length > 0) {
        setFeaturedMovie(popularMovies[0]);
      }
    }

    // Evento de busca
    searchBtn.addEventListener('click', async () => {
      const query = searchInput.value.trim();
      if (!query) return;
      const results = await searchMovies(query);
      if (results.length > 0) {
        displayMovies(results);
        setFeaturedMovie(results[0]);
      } else {
        moviesGrid.innerHTML = '<p class="col-span-full text-center text-gray-400">Nenhum filme encontrado.</p>';
      }
    });

    // Enter no input também faz busca
    searchInput.addEventListener('keydown', e => {
      if (e.key === 'Enter') {
        searchBtn.click();
      }
    });

    init();
  </script>
</body>
</html>
